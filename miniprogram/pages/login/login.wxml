<view class="container login-container">
  <view class="logo-area">
    <image class="logo" src="/images/logo.png" mode="aspectFit"></image>
    <text class="app-name">白蚁智能监测平台</text>
  </view>

  <view class="form-area">
    <!-- 登录模式 -->
    <block wx:if="{{!isRegister}}">
        <view class="input-group">
        <text class="label">账号</text>
        <input class="input" placeholder="请输入账号/手机号" bindinput="onUsernameInput" value="{{username}}"/>
        </view>

        <view class="input-group">
        <text class="label">密码</text>
        <input class="input" password type="text" placeholder="请输入密码" bindinput="onPasswordInput" value="{{password}}"/>
        </view>

        <button class="btn-primary login-btn" bindtap="handleLogin" loading="{{loading}}">登 录</button>
        
        <view class="actions">
        <text class="link" bindtap="handleForgotPassword">忘记密码?</text>
        <text class="link" bindtap="toggleMode">注册账号</text>
        </view>
    </block>

    <!-- 注册模式 -->
    <block wx:else>
        <view class="input-group">
            <text class="label">新账号</text>
            <input class="input" placeholder="请输入新账号" bindinput="onUsernameInput" value="{{username}}"/>
        </view>

        <view class="input-group">
            <text class="label">设置密码</text>
            <input class="input" password type="text" placeholder="请设置密码" bindinput="onPasswordInput" value="{{password}}"/>
        </view>

        <view class="input-group">
            <text class="label">备注姓名</text>
            <input class="input" placeholder="请输入真实姓名（方便管理员审核）" bindinput="onRemarkNameInput" value="{{remarkName}}"/>
        </view>

        <view class="input-group">
            <text class="label">手机号码</text>
            <input class="input" type="number" maxlength="11" placeholder="请输入手机号码" bindinput="onPhoneInput" value="{{phone}}"/>
        </view>

        <view class="input-group">
            <text class="label">身份角色</text>
             <radio-group bindchange="onRoleChange" class="radio-group">
                <label class="radio"><radio value="manager" checked="{{role === 'manager'}}"/>负责人</label>
                <label class="radio"><radio value="operator" checked="{{role === 'operator'}}"/>巡查员</label>
            </radio-group>
        </view>

        <button class="btn-primary login-btn" bindtap="handleRegister" loading="{{loading}}">注 册</button>
        
        <view class="actions">
            <text class="link" bindtap="toggleMode">返回登录</text>
        </view>
    </block>

    <!-- 开发者信息 -->
    <view class="footer-info">
      <text>Development by 湖北园建生物防治有限公司</text>
    </view>

  </view>
</view>
