<view class="container">
  <form bindsubmit="onSubmit">
    
    <!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šæ ¸å¿ƒåŸºç¡€ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">æ ¸å¿ƒåŸºç¡€ä¿¡æ¯ (å¿…å¡«)</view>
      
      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}ç±»åˆ«</view>
        <radio-group name="category" bindchange="onCategoryChange">
          <label class="radio-label"><radio value="single" checked="{{formData.category === 'single'}}"/>å•ä¸ª{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}</label>
          <label class="radio-label"><radio value="multiple" checked="{{formData.category === 'multiple'}}"/>å¤šä¸ª{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}é›†åˆ</label>
        </radio-group>
      </view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}åç§°</view>
        <input name="name" value="{{formData.name}}" placeholder="è¯·è¾“å…¥{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}åç§°" class="input" />
      </view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}ç±»å‹</view>
        <picker bindchange="onTypeChange" value="{{typeIndex}}" range="{{projectType === 'reservoir' ? reservoirTypes : embankmentTypes}}">
          <view class="picker">
            {{projectType === 'reservoir' ? reservoirTypes[typeIndex] : embankmentTypes[typeIndex]}}
          </view>
        </picker>
      </view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}åŒºåŸŸ</view>
        <picker mode="region" bindchange="onRegionChange" value="{{region}}">
          <view class="picker">
            {{region[0]}}ï¼Œ{{region[1]}}ï¼Œ{{region[2]}}
          </view>
        </picker>
      </view>

      <view class="form-item">
        <view class="label">è”ç³»äººå‘˜</view>
        <view class="double-input">
           <picker bindchange="onAdminChange" value="{{adminIndex}}" range="{{adminNames}}" class="picker-half">
            <view class="picker-inner">{{adminNames[adminIndex] || 'é€‰æ‹©ç®¡ç†å‘˜'}}</view>
          </picker>
          <picker bindchange="onManagerChange" value="{{managerIndex}}" range="{{managerNames}}" class="picker-half">
             <view class="picker-inner">{{managerNames[managerIndex] || 'é€‰æ‹©è´Ÿè´£äºº'}}</view>
          </picker>
        </view>
      </view>
    </view>

    <!-- ç¬¬äºŒéƒ¨åˆ†ï¼šå‚æ•°ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}å‚æ•°ä¿¡æ¯ (é€‰å¡«)</view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'æ°´åº“åå‹' : 'å ¤é˜²ç»“æ„'}}</view>
        <picker bindchange="onDamTypeChange" value="{{damTypeIndex}}" range="{{damTypes}}">
          <view class="picker {{damTypeIndex === -1 ? 'placeholder' : ''}}">
            {{damTypeIndex === -1 ? (projectType === 'reservoir' ? 'è¯·é€‰æ‹©å¤§ååå‹' : 'è¯·é€‰æ‹©å ¤é˜²ç»“æ„') : damTypes[damTypeIndex]}}
          </view>
        </picker>
      </view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'åé¡¶é•¿åº¦' : 'å ¤é¡¶é•¿åº¦'}} (ç±³)</view>
        <input name="crestLength" value="{{formData.crestLength}}" placeholder="è¯·è¾“å…¥é•¿åº¦" type="number" class="input" />
      </view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'åè„šé•¿åº¦' : 'å ¤è„šé•¿åº¦'}} (ç±³)</view>
        <input name="toeLength" value="{{formData.toeLength}}" placeholder="è¯·è¾“å…¥é•¿åº¦" type="number" class="input" />
      </view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'æ–œå¡é•¿åº¦' : 'æŠ¤å¡é•¿åº¦'}} (ç±³)</view>
        <input name="slopeLength" value="{{formData.slopeLength}}" placeholder="è¯·è¾“å…¥é•¿åº¦" type="number" class="input" />
      </view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'æœ€å¤§åé«˜' : 'æœ€å¤§å ¤é«˜'}} (ç±³)</view>
        <input name="maxHeight" value="{{formData.maxHeight}}" placeholder="è¯·è¾“å…¥é«˜åº¦" type="number" class="input" />
      </view>

      <view class="form-item">
        <view class="label">{{projectType === 'reservoir' ? 'æ°´åº“' : 'å ¤é˜²'}}åœ°å€</view>
        <view class="input-with-btn">
          <input name="address" value="{{address}}" bindinput="onAddressInput" placeholder="è¯·é€‰æ‹©æˆ–è¾“å…¥è¯¦ç»†åœ°å€" class="input" />
          <button size="mini" bindtap="chooseLocation" class="btn-small" type="primary" plain="true">ğŸ“ å®šä½</button>
        </view>
      </view>

      <view class="form-item">
        <view class="label">ç»çº¬åº¦</view>
        <input name="latlng" value="{{latlng}}" placeholder="ç»åº¦ / çº¬åº¦" class="input" disabled />
      </view>
    </view>

    <!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šç®¡ç†ä¸ç›‘æµ‹ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">ç®¡ç†ä¸ç›‘æµ‹ä¿¡æ¯ (é€‰å¡«)</view>

      <view class="form-item">
        <view class="label">å±å®³ç­‰çº§</view>
        <picker bindchange="onHazardLevelChange" value="{{hazardIndex}}" range="{{hazardLevels}}">
          <view class="picker {{hazardIndex === -1 ? 'placeholder' : ''}}">
             {{hazardIndex === -1 ? 'è¯·é€‰æ‹©å±å®³ç­‰çº§' : hazardLevels[hazardIndex]}}
          </view>
        </picker>
      </view>

      <view class="form-item">
        <view class="label">æ£€æŸ¥æ–¹æ³•</view>
        <radio-group name="checkMethod">
          <label class="block-label" wx:for="{{checkMethods}}" wx:key="*this">
             <radio value="{{item}}" checked="{{item === formData.checkMethod}}"/> {{item}}
          </label>
        </radio-group>
      </view>

      <view class="form-item">
        <view class="label">æ²»ç†æ–¹æ³•</view>
        <radio-group name="governanceMethod">
          <label class="block-label" wx:for="{{governanceMethods}}" wx:key="*this">
             <radio value="{{item}}" checked="{{item === formData.governanceMethod}}"/> {{item}}
          </label>
        </radio-group>
      </view>

      <view class="form-item">
        <view class="label">ç›‘æµ‹è£…ç½®</view>
        <checkbox-group name="monitorDevices">
          <label class="block-label" wx:for="{{monitorDevices}}" wx:key="name">
             <checkbox value="{{item.name}}" checked="{{item.checked}}" /> {{item.name}}
          </label>
        </checkbox-group>
      </view>
    </view>

    <view class="btn-area">
      <button formType="submit" type="primary">æäº¤</button>
      <button bindtap="onReset" style="margin-top: 20rpx;">é‡ç½®</button>
    </view>
  </form>
</view>
